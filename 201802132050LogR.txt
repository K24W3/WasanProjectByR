> setwd("F:/wasan_vec/output_data")
> wa <- read.csv("vectors4.csv")
> X=as(wa,"matrix")
> library(NMF)
> res.nmf <- nmf(X,7,'lee',seed=71)
>  w <- basis(res.nmf)
>  h<-coef(res.nmf)
>  X.nmf<- w %*% h
> img_num<-c(001,002,003,004,005,006,007,008,009,011,012,013,014,015,018,020,021,022,023,024,025,026,027,028,029,031,032,033,034,035,037,038,039,040,041,042,043,044,045,046,047,048,049,050,051,052,053,057,058,061,062,063,064,065,066,067,068,069,070,071,072,073,074,075,076,078,079,081,082,083,084,085,086,087,088,089,090,091,092,093,094,095,096,098,099,100,101,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,135,136,137,138,139,140,141,142,143,144,145,148,149,150,151,152,153,155,158,159,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,194,195,197)
> rownames(w)<-img_num
> r<-round(w*100,0)
> stars(r[1:20,],key.loc=c(14,2),main="NMF results 1-20",full=FALSE)
> numCL=7
> km<-kmeans(w,numCL)
> result <- km$cluster #クラスタリング結果の抽出
> img_num[result==1]
 [1]  21  37  38  39  45  46  47  48  49  64  65  69  81  83  90  94  95 101
[19] 109 120 136 140 143 174 180 181 182 183 184 185 187 188 189
> img_num[result==2]
[1]  28  31  62  99 137
> img_num[result==3]
 [1]  44  58 113 114 115 116 152 155 158 159 190 191 192 197
> img_num[result==4]
 [1]   2   4   5   6   7  11  12  13  15  22  25  27  29  32  33  34  35  52
[19]  57  61  82  89 100 104 105 106 107 108 110 135 141 173 175 176 177 178
> img_num[result==5]
 [1]  43  50  51  66  67  68  70  71  72  73  74  75  84  85  93  96 111 112
[19] 117 118 119 121 138 139 142 144 148 150 153 194 195
> img_num[result==6]
 [1]   1   3   8   9  14  18  20  23  24  26  40  41  42  63  76  78  79  87
[19]  88  91  92  98 149 186
> img_num[result==7]
[1]  53  86 145 151 179
> 
